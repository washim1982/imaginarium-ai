{"ast":null,"code":"import React,{useState}from\"react\";import{useApi}from\"../services/api\";import{useAuth0}from\"@auth0/auth0-react\";import\"../styles/page-translation.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LANGUAGES=[\"English\",\"Arabic\",\"Spanish\",\"French\",\"German\",\"Hindi\",\"Japanese\",\"Chinese\",\"Portuguese\"];export default function Translation(){const api=useApi();const{isAuthenticated,loginWithRedirect}=useAuth0();const[file,setFile]=useState(null);const[language,setLanguage]=useState(\"English\");const[original,setOriginal]=useState(\"\");const[translation,setTranslation]=useState(\"\");const[summary,setSummary]=useState(\"\");const[busy,setBusy]=useState(false);const[error,setError]=useState(\"\");if(!isAuthenticated){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Translate & Summarize\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You need to sign in to use this feature.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loginWithRedirect({authorizationParams:{audience:process.env.REACT_APP_AUTH0_AUDIENCE,scope:\"openid profile email\",prompt:\"login\"}}),children:\"Login\"})]});}const run=async()=>{if(!file)return;setBusy(true);setError(\"\");setTranslation(\"\");setSummary(\"\");let preview=\"\";if(file.type.startsWith(\"text/\")||file.name.toLowerCase().endsWith(\".txt\")){preview=await file.text();}else{preview=\"Preview available after processing.\";}setOriginal(preview);const form=new FormData();form.append(\"file\",file);form.append(\"language\",language);try{const{data}=await api.post(\"/translation\",form,{headers:{\"Content-Type\":\"multipart/form-data\"}});setOriginal(data.original||preview);setTranslation(data.translation||\"\");setSummary(data.summary||\"\");}catch(err){var _err$response,_err$response$data;console.error(\"Translation error:\",err);setError((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||\"Translation failed. Ensure the file is under 20MB and fewer than 10 pages.\");}finally{setBusy(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page translation\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Translate & Summarize\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"translator-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card upload-card\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".txt,.docx,.pdf\",onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"select\",{value:language,onChange:e=>setLanguage(e.target.value),children:LANGUAGES.map(lang=>/*#__PURE__*/_jsx(\"option\",{value:lang,children:lang},lang))}),/*#__PURE__*/_jsx(\"button\",{onClick:run,disabled:!file||busy,children:busy?\"Processing…\":\"Run\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"note\",children:\"Upload up to 20MB (.txt, .docx, .pdf). Summary is always returned in English.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"triple\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Original (Arabic)\"}),/*#__PURE__*/_jsx(\"textarea\",{readOnly:true,value:original})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Translation (English)\"}),/*#__PURE__*/_jsx(\"textarea\",{readOnly:true,value:translation})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Summary\"}),/*#__PURE__*/_jsx(\"textarea\",{readOnly:true,value:summary})]})]})]})]});}","map":{"version":3,"names":["React","useState","useApi","useAuth0","jsx","_jsx","jsxs","_jsxs","LANGUAGES","Translation","api","isAuthenticated","loginWithRedirect","file","setFile","language","setLanguage","original","setOriginal","translation","setTranslation","summary","setSummary","busy","setBusy","error","setError","style","padding","children","onClick","authorizationParams","audience","process","env","REACT_APP_AUTH0_AUDIENCE","scope","prompt","run","preview","type","startsWith","name","toLowerCase","endsWith","text","form","FormData","append","data","post","headers","err","_err$response","_err$response$data","console","response","detail","className","accept","onChange","e","target","files","value","map","lang","disabled","readOnly"],"sources":["/home/python/imaginarium-ai/frontend/src/pages/Translation.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useApi } from \"../services/api\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport \"../styles/page-translation.css\";\n\nconst LANGUAGES = [\n  \"English\",\n  \"Arabic\",\n  \"Spanish\",\n  \"French\",\n  \"German\",\n  \"Hindi\",\n  \"Japanese\",\n  \"Chinese\",\n  \"Portuguese\",\n];\n\nexport default function Translation() {\n  const api = useApi();\n  const { isAuthenticated, loginWithRedirect } = useAuth0();\n  const [file, setFile] = useState(null);\n  const [language, setLanguage] = useState(\"English\");\n  const [original, setOriginal] = useState(\"\");\n  const [translation, setTranslation] = useState(\"\");\n  const [summary, setSummary] = useState(\"\");\n  const [busy, setBusy] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  if (!isAuthenticated) {\n    return (\n      <div style={{ padding: 24 }}>\n        <h3>Translate & Summarize</h3>\n        <p>You need to sign in to use this feature.</p>\n        <button\n          onClick={() =>\n            loginWithRedirect({\n              authorizationParams: {\n                audience: process.env.REACT_APP_AUTH0_AUDIENCE,\n                scope: \"openid profile email\",\n                prompt: \"login\",\n              },\n            })\n          }\n        >\n          Login\n        </button>\n      </div>\n    );\n  }\n\n  const run = async () => {\n    if (!file) return;\n    setBusy(true);\n    setError(\"\");\n    setTranslation(\"\");\n    setSummary(\"\");\n\n    let preview = \"\";\n    if (file.type.startsWith(\"text/\") || file.name.toLowerCase().endsWith(\".txt\")) {\n      preview = await file.text();\n    } else {\n      preview = \"Preview available after processing.\";\n    }\n    setOriginal(preview);\n\n    const form = new FormData();\n    form.append(\"file\", file);\n    form.append(\"language\", language);\n\n    try {\n      const { data } = await api.post(\"/translation\", form, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n      setOriginal(data.original || preview);\n      setTranslation(data.translation || \"\");\n      setSummary(data.summary || \"\");\n    } catch (err) {\n      console.error(\"Translation error:\", err);\n      setError(\n        err?.response?.data?.detail ||\n          \"Translation failed. Ensure the file is under 20MB and fewer than 10 pages.\"\n      );\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    <div className=\"page translation\">\n      <h2>Translate & Summarize</h2>\n      {error && <p className=\"error-msg\">{error}</p>}\n      <div className=\"translator-controls\">\n        <div className=\"card upload-card\">\n          <input\n            type=\"file\"\n            accept=\".txt,.docx,.pdf\"\n            onChange={(e) => setFile(e.target.files[0])}\n          />\n          <select\n            value={language}\n            onChange={(e) => setLanguage(e.target.value)}\n          >\n            {LANGUAGES.map((lang) => (\n              <option key={lang} value={lang}>\n                {lang}\n              </option>\n            ))}\n          </select>\n          <button onClick={run} disabled={!file || busy}>\n            {busy ? \"Processing…\" : \"Run\"}\n          </button>\n        </div>\n        <p className=\"note\">\n          Upload up to 20MB (.txt, .docx, .pdf). Summary is always returned in English.\n        </p>\n\n        <div className=\"triple\">\n          <div>\n            <label>Original (Arabic)</label>\n            <textarea readOnly value={original}></textarea>\n          </div>\n          <div>\n            <label>Translation (English)</label>\n            <textarea readOnly value={translation}></textarea>\n          </div>\n          <div>\n            <label>Summary</label>\n            <textarea readOnly value={summary}></textarea>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}