{"ast":null,"code":"import _objectSpread from\"/home/python/imaginarium-ai/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";import{FiPlus,FiMic}from\"react-icons/fi\";import{useApi}from\"../services/api\";import MarkdownMessage from\"../components/MarkdownMessage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GREETING_PHRASES=[\"How can I help you today?\",\"What's on your mind?\",\"Ask me anything—I'm listening.\",\"Ready when you are. Just start typing.\"];export default function ModelHub(){const api=useApi();const[models,setModels]=useState([]);const[selected,setSelected]=useState([\"granite4:tiny-h\"]);const[messages,setMessages]=useState([]);const chatWindowRef=useRef(null);const fileInputRef=useRef(null);const recognitionRef=useRef(null);const dropdownRef=useRef(null);const[attachments,setAttachments]=useState([]);const[isRecording,setIsRecording]=useState(false);const[prompt,setPrompt]=useState(\"\");const[greetingIndex,setGreetingIndex]=useState(0);const[modelListOpen,setModelListOpen]=useState(false);// Load models\nuseEffect(()=>{(async()=>{try{const{data}=await api.get(\"/models\");setModels(data.models||[]);}catch(err){console.error(\"Error loading models:\",err);}})();},[api]);const appendToPrompt=chunk=>{if(!chunk)return;setPrompt(prev=>{const base=prev.trimEnd();return base?\"\".concat(base,\"\\n\").concat(chunk):chunk;});};const handleFileClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleFileChange=async event=>{const files=Array.from(event.target.files||[]);if(!files.length)return;const readers=files.map(file=>new Promise(resolve=>{if(!file.type.startsWith(\"text\")&&file.type!==\"application/json\"){resolve({name:file.name,content:\"[\".concat(file.name,\"] Selected (preview unavailable)\")});return;}const reader=new FileReader();reader.onload=()=>{resolve({name:file.name,content:reader.result});};reader.onerror=()=>resolve({name:file.name,content:\"\"});reader.readAsText(file);}));const contents=await Promise.all(readers);contents.forEach(_ref=>{let{name,content}=_ref;const snippet=content?\"[File: \".concat(name,\"]\\n\").concat(content.slice(0,4000)):\"[File: \".concat(name,\"]\");appendToPrompt(snippet);});setAttachments(files.map(f=>f.name));event.target.value=\"\";};const toggleRecording=()=>{const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;if(!SpeechRecognition){console.warn(\"Speech recognition not supported in this browser.\");return;}if(!recognitionRef.current){const recognition=new SpeechRecognition();recognition.lang=\"en-US\";recognition.interimResults=false;recognition.maxAlternatives=1;recognition.onresult=event=>{const transcript=event.results[0][0].transcript;appendToPrompt(transcript);};recognition.onend=()=>setIsRecording(false);recognition.onerror=()=>setIsRecording(false);recognitionRef.current=recognition;}if(isRecording){recognitionRef.current.stop();}else{setIsRecording(true);recognitionRef.current.start();}};const send=async()=>{const trimmedPrompt=prompt.trim();if(!trimmedPrompt||!selected[0])return;const model=selected[0];setPrompt(\"\");setAttachments([]);setMessages(prev=>[...prev,{role:\"user\",content:trimmedPrompt},{role:\"assistant\",content:\"\",model}]);try{const res=await fetch(\"/api/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:api.defaults.headers.common.Authorization},body:JSON.stringify({models:[model],prompt:trimmedPrompt})});const reader=res.body.getReader();const dec=new TextDecoder();let fullText=\"\";while(true){const{done,value}=await reader.read();if(done)break;const chunk=dec.decode(value).trim();if(!chunk)continue;for(const line of chunk.split(\"\\n\")){try{const j=JSON.parse(line);if(j.response){fullText+=j.response;setMessages(prev=>{const updated=[...prev];const lastIndex=updated.length-1;if(lastIndex>=0&&updated[lastIndex].role===\"assistant\"){updated[lastIndex]=_objectSpread(_objectSpread({},updated[lastIndex]),{},{content:fullText});}return updated;});}}catch(_unused){continue;}}}}catch(err){console.error(\"Error sending message:\",err);setMessages(prev=>{const updated=[...prev];const lastIndex=updated.length-1;if(lastIndex>=0&&updated[lastIndex].role===\"assistant\"){updated[lastIndex]=_objectSpread(_objectSpread({},updated[lastIndex]),{},{content:\"Error generating response. Please try again.\"});}return updated;});}};const hasActivity=messages.length>0||prompt.trim().length>0||attachments.length>0;useEffect(()=>{const el=chatWindowRef.current;if(!el)return;el.scrollTo({top:el.scrollHeight,behavior:\"smooth\"});},[messages]);useEffect(()=>{if(hasActivity)return;const id=setInterval(()=>{setGreetingIndex(idx=>(idx+1)%GREETING_PHRASES.length);},2800);return()=>clearInterval(id);},[hasActivity]);useEffect(()=>{const handleClickOutside=event=>{if(!dropdownRef.current)return;if(!dropdownRef.current.contains(event.target)){setModelListOpen(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"modelhub\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-shell \".concat(hasActivity?\"has-activity\":\"idle\"),children:[!hasActivity&&/*#__PURE__*/_jsxs(\"div\",{className:\"greeting-hero\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"greeting-title\",children:GREETING_PHRASES[greetingIndex]}),/*#__PURE__*/_jsx(\"div\",{className:\"greeting-subtitle\",children:\"Type a prompt, attach a file, or speak a request to explore ideas.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-window\",ref:chatWindowRef,children:messages.map((m,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"msg \".concat(m.role),children:/*#__PURE__*/_jsx(\"div\",{className:\"bubble\",children:m.role===\"assistant\"&&!m.content?/*#__PURE__*/_jsxs(\"div\",{className:\"thinking-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"thinking-text\",children:\"Thinking\\u2026\"})]}):/*#__PURE__*/_jsx(MarkdownMessage,{text:m.content||\"\"})})},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-composer \".concat(hasActivity?\"\":\"centered\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"composer-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"prompt-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"prompt-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-icons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"input-icon\",\"aria-label\":\"Attach files\",onClick:handleFileClick,children:/*#__PURE__*/_jsx(FiPlus,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"input-icon \".concat(isRecording?\"recording\":\"\"),\"aria-label\":\"Voice input\",onClick:toggleRecording,children:/*#__PURE__*/_jsx(FiMic,{})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type your prompt...\",className:\"prompt-input\",value:prompt,onChange:e=>setPrompt(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&send()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"model-dropdown \".concat(modelListOpen?\"open\":\"\"),role:\"combobox\",\"aria-expanded\":modelListOpen,ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"model-dropdown-value\",onClick:()=>setModelListOpen(prev=>!prev),children:selected[0]||\"Select model...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"model-dropdown-list\",children:models.map(m=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"model-option \".concat(selected[0]===m?\"selected\":\"\"),onClick:()=>{setSelected([m]);setModelListOpen(false);},children:m},m))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"send-icon\",onClick:send,\"aria-label\":\"Send prompt\",children:\"\\u27A4\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,style:{display:\"none\"},multiple:true,onChange:handleFileChange})]}),attachments.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"attachment-list\",children:attachments.map((name,idx)=>/*#__PURE__*/_jsx(\"span\",{className:\"attachment-chip\",children:name},\"\".concat(name,\"-\").concat(idx)))}),/*#__PURE__*/_jsx(\"div\",{className:\"model-warning\",children:\"Model Hub can make mistakes. Double-check important information.\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","FiPlus","FiMic","useApi","MarkdownMessage","jsx","_jsx","jsxs","_jsxs","GREETING_PHRASES","ModelHub","api","models","setModels","selected","setSelected","messages","setMessages","chatWindowRef","fileInputRef","recognitionRef","dropdownRef","attachments","setAttachments","isRecording","setIsRecording","prompt","setPrompt","greetingIndex","setGreetingIndex","modelListOpen","setModelListOpen","data","get","err","console","error","appendToPrompt","chunk","prev","base","trimEnd","concat","handleFileClick","_fileInputRef$current","current","click","handleFileChange","event","files","Array","from","target","length","readers","map","file","Promise","resolve","type","startsWith","name","content","reader","FileReader","onload","result","onerror","readAsText","contents","all","forEach","_ref","snippet","slice","f","value","toggleRecording","SpeechRecognition","window","webkitSpeechRecognition","warn","recognition","lang","interimResults","maxAlternatives","onresult","transcript","results","onend","stop","start","send","trimmedPrompt","trim","model","role","res","fetch","method","headers","Authorization","defaults","common","body","JSON","stringify","getReader","dec","TextDecoder","fullText","done","read","decode","line","split","j","parse","response","updated","lastIndex","_objectSpread","_unused","hasActivity","el","scrollTo","top","scrollHeight","behavior","id","setInterval","idx","clearInterval","handleClickOutside","contains","document","addEventListener","removeEventListener","className","children","ref","m","i","text","onClick","placeholder","onChange","e","onKeyDown","key","style","display","multiple"],"sources":["/home/python/imaginarium-ai/frontend/src/pages/ModelHub.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { FiPlus, FiMic } from \"react-icons/fi\";\nimport { useApi } from \"../services/api\";\nimport MarkdownMessage from \"../components/MarkdownMessage\";\n\nconst GREETING_PHRASES = [\n  \"How can I help you today?\",\n  \"What's on your mind?\",\n  \"Ask me anything—I'm listening.\",\n  \"Ready when you are. Just start typing.\",\n];\n\nexport default function ModelHub() {\n  const api = useApi();\n  const [models, setModels] = useState([]);\n  const [selected, setSelected] = useState([\"granite4:tiny-h\"]);\n  const [messages, setMessages] = useState([]);\n  const chatWindowRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const recognitionRef = useRef(null);\n  const dropdownRef = useRef(null);\n  const [attachments, setAttachments] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [prompt, setPrompt] = useState(\"\");\n  const [greetingIndex, setGreetingIndex] = useState(0);\n  const [modelListOpen, setModelListOpen] = useState(false);\n\n  // Load models\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await api.get(\"/models\");\n        setModels(data.models || []);\n      } catch (err) {\n        console.error(\"Error loading models:\", err);\n      }\n    })();\n  }, [api]);\n\n\n  const appendToPrompt = (chunk) => {\n    if (!chunk) return;\n    setPrompt((prev) => {\n      const base = prev.trimEnd();\n      return base ? `${base}\\n${chunk}` : chunk;\n    });\n  };\n\n  const handleFileClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = async (event) => {\n    const files = Array.from(event.target.files || []);\n    if (!files.length) return;\n\n    const readers = files.map(\n      (file) =>\n        new Promise((resolve) => {\n          if (!file.type.startsWith(\"text\") && file.type !== \"application/json\") {\n            resolve({\n              name: file.name,\n              content: `[${file.name}] Selected (preview unavailable)`,\n            });\n            return;\n          }\n          const reader = new FileReader();\n          reader.onload = () => {\n            resolve({ name: file.name, content: reader.result });\n          };\n          reader.onerror = () => resolve({ name: file.name, content: \"\" });\n          reader.readAsText(file);\n        })\n    );\n\n    const contents = await Promise.all(readers);\n    contents.forEach(({ name, content }) => {\n      const snippet = content\n        ? `[File: ${name}]\\n${content.slice(0, 4000)}`\n        : `[File: ${name}]`;\n      appendToPrompt(snippet);\n    });\n\n    setAttachments(files.map((f) => f.name));\n    event.target.value = \"\";\n  };\n\n  const toggleRecording = () => {\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      console.warn(\"Speech recognition not supported in this browser.\");\n      return;\n    }\n\n    if (!recognitionRef.current) {\n      const recognition = new SpeechRecognition();\n      recognition.lang = \"en-US\";\n      recognition.interimResults = false;\n      recognition.maxAlternatives = 1;\n      recognition.onresult = (event) => {\n        const transcript = event.results[0][0].transcript;\n        appendToPrompt(transcript);\n      };\n      recognition.onend = () => setIsRecording(false);\n      recognition.onerror = () => setIsRecording(false);\n      recognitionRef.current = recognition;\n    }\n\n    if (isRecording) {\n      recognitionRef.current.stop();\n    } else {\n      setIsRecording(true);\n      recognitionRef.current.start();\n    }\n  };\n\n  const send = async () => {\n    const trimmedPrompt = prompt.trim();\n    if (!trimmedPrompt || !selected[0]) return;\n\n    const model = selected[0];\n    setPrompt(\"\");\n    setAttachments([]);\n\n    setMessages((prev) => [\n      ...prev,\n      { role: \"user\", content: trimmedPrompt },\n      { role: \"assistant\", content: \"\", model },\n    ]);\n\n    try {\n      const res = await fetch(`/api/chat`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: api.defaults.headers.common.Authorization,\n        },\n        body: JSON.stringify({ models: [model], prompt: trimmedPrompt }),\n      });\n\n      const reader = res.body.getReader();\n      const dec = new TextDecoder();\n      let fullText = \"\";\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n        const chunk = dec.decode(value).trim();\n        if (!chunk) continue;\n        for (const line of chunk.split(\"\\n\")) {\n          try {\n            const j = JSON.parse(line);\n            if (j.response) {\n              fullText += j.response;\n              setMessages((prev) => {\n                const updated = [...prev];\n                const lastIndex = updated.length - 1;\n                if (lastIndex >= 0 && updated[lastIndex].role === \"assistant\") {\n                  updated[lastIndex] = { ...updated[lastIndex], content: fullText };\n                }\n                return updated;\n              });\n            }\n          } catch {\n            continue;\n          }\n        }\n      }\n    } catch (err) {\n      console.error(\"Error sending message:\", err);\n      setMessages((prev) => {\n        const updated = [...prev];\n        const lastIndex = updated.length - 1;\n        if (lastIndex >= 0 && updated[lastIndex].role === \"assistant\") {\n          updated[lastIndex] = {\n            ...updated[lastIndex],\n            content: \"Error generating response. Please try again.\",\n          };\n        }\n        return updated;\n      });\n    }\n  };\n\n  const hasActivity =\n    messages.length > 0 || prompt.trim().length > 0 || attachments.length > 0;\n\n  useEffect(() => {\n    const el = chatWindowRef.current;\n    if (!el) return;\n    el.scrollTo({ top: el.scrollHeight, behavior: \"smooth\" });\n  }, [messages]);\n\n  useEffect(() => {\n    if (hasActivity) return;\n    const id = setInterval(() => {\n      setGreetingIndex((idx) => (idx + 1) % GREETING_PHRASES.length);\n    }, 2800);\n    return () => clearInterval(id);\n  }, [hasActivity]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (!dropdownRef.current) return;\n      if (!dropdownRef.current.contains(event.target)) {\n        setModelListOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  return (\n    <div className={`modelhub`}>\n      <div className={`chat-shell ${hasActivity ? \"has-activity\" : \"idle\"}`}>\n        {!hasActivity && (\n          <div className=\"greeting-hero\">\n            <div className=\"greeting-title\">\n              {GREETING_PHRASES[greetingIndex]}\n            </div>\n            <div className=\"greeting-subtitle\">\n              Type a prompt, attach a file, or speak a request to explore ideas.\n            </div>\n          </div>\n        )}\n        <div className=\"chat-window\" ref={chatWindowRef}>\n          {messages.map((m, i) => (\n            <div key={i} className={`msg ${m.role}`}>\n              <div className=\"bubble\">\n                {m.role === \"assistant\" && !m.content ? (\n                  <div className=\"thinking-indicator\">\n                    <span className=\"dot\" />\n                    <span className=\"dot\" />\n                    <span className=\"dot\" />\n                    <span className=\"thinking-text\">Thinking…</span>\n                  </div>\n                ) : (\n                  <MarkdownMessage text={m.content || \"\"} />\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className={`chat-composer ${hasActivity ? \"\" : \"centered\"}`}>\n          <div className=\"composer-left\">\n            <div className=\"prompt-row\">\n              <div className=\"prompt-wrapper\">\n                <div className=\"input-icons\">\n                  <button\n                    type=\"button\"\n                    className=\"input-icon\"\n                    aria-label=\"Attach files\"\n                    onClick={handleFileClick}\n                  >\n                    <FiPlus />\n                  </button>\n                  <button\n                    type=\"button\"\n                    className={`input-icon ${isRecording ? \"recording\" : \"\"}`}\n                    aria-label=\"Voice input\"\n                    onClick={toggleRecording}\n                  >\n                    <FiMic />\n                  </button>\n                </div>\n                <input\n                  type=\"text\"\n                  placeholder=\"Type your prompt...\"\n                  className=\"prompt-input\"\n                  value={prompt}\n                  onChange={(e) => setPrompt(e.target.value)}\n                  onKeyDown={(e) => e.key === \"Enter\" && send()}\n                />\n              </div>\n              <div className=\"dropdown-wrapper\">\n                <div\n                  className={`model-dropdown ${modelListOpen ? \"open\" : \"\"}`}\n                  role=\"combobox\"\n                  aria-expanded={modelListOpen}\n                  ref={dropdownRef}\n                >\n                  <button\n                    type=\"button\"\n                    className=\"model-dropdown-value\"\n                    onClick={() => setModelListOpen((prev) => !prev)}\n                  >\n                    {selected[0] || \"Select model...\"}\n                  </button>\n                  <div className=\"model-dropdown-list\">\n                    {models.map((m) => (\n                      <button\n                        key={m}\n                        type=\"button\"\n                        className={`model-option ${selected[0] === m ? \"selected\" : \"\"}`}\n                        onClick={() => {\n                          setSelected([m]);\n                          setModelListOpen(false);\n                        }}\n                      >\n                        {m}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n                <button className=\"send-icon\" onClick={send} aria-label=\"Send prompt\">\n                  ➤\n                </button>\n              </div>\n            </div>\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              style={{ display: \"none\" }}\n              multiple\n              onChange={handleFileChange}\n            />\n          </div>\n\n          {attachments.length > 0 && (\n            <div className=\"attachment-list\">\n              {attachments.map((name, idx) => (\n                <span key={`${name}-${idx}`} className=\"attachment-chip\">\n                  {name}\n                </span>\n              ))}\n            </div>\n          )}\n          <div className=\"model-warning\">\n            Model Hub can make mistakes. Double-check important information.\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}